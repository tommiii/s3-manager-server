"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const error = require('debug')('lamba:getObjects');
const AWS = require("aws-sdk");
const libs_1 = require("../libs");
const { S3_BUCKET_NAME: Bucket, REGION: region } = process.env;
exports.listObjects = async (event) => {
    if (!Bucket) {
        return libs_1.Response({ statusCode: 400, body: { message: "BadRequest" } });
    }
    try {
        const s3 = new AWS.S3({ signatureVersion: "v4", region });
        const params = {
            Bucket,
        };
        const response = await s3.listObjects(params).promise();
        return libs_1.Response({ statusCode: 200, body: response });
    }
    catch (err) {
        error(err);
        return libs_1.Response({ statusCode: 500, body: { message: "InternalServerError" } });
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saXN0T2JqZWN0cy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ25ELCtCQUFnQztBQUNoQyxrQ0FBbUM7QUFFbkMsTUFBTSxFQUFFLGNBQWMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFFL0QsT0FBTyxDQUFDLFdBQVcsR0FBRyxLQUFLLEVBQUUsS0FBc0IsRUFBZ0IsRUFBRTtJQUNuRSxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQUUsT0FBTyxlQUFRLENBQUMsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FBRTtJQUN2RixJQUFJO1FBQ0YsTUFBTSxFQUFFLEdBQVcsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsZ0JBQWdCLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDbEUsTUFBTSxNQUFNLEdBQW9DO1lBQzlDLE1BQU07U0FDUCxDQUFBO1FBQ0QsTUFBTSxRQUFRLEdBQUcsTUFBTSxFQUFFLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3hELE9BQU8sZUFBUSxDQUFDLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztLQUN0RDtJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1osS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsT0FBTyxlQUFRLENBQUMsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxFQUFFLENBQUMsQ0FBQztLQUNoRjtBQUNILENBQUMsQ0FBQyJ9